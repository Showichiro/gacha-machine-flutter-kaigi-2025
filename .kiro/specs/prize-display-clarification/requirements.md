# Requirements Document

## Introduction

本ドキュメントは、ガチャアプリケーションにおける景品表示の明確化機能の要件を定義します。この機能は、ユーザ（来場者および運営者）に対して、どのような景品が設定されているか、その詳細情報（確率、在庫状況、特性等）を視覚的かつ明確に表示することを目的としています。これにより、来場者は獲得可能な景品を事前に確認でき、運営者は景品の設定状態を一目で把握できるようになります。

## Project Description (Input)

ユーザにどのような景品が設定されているかを明確にしたい。

## Requirements

### Requirement 1: 景品一覧表示機能

**Objective:** 来場者として、ガチャで獲得可能な景品の一覧を確認したい。これにより、どのような景品が当たるか事前に知ることができ、ガチャへの期待感が高まる。

#### Acceptance Criteria

1. WHEN 来場者がガチャ画面を表示する THEN ガチャアプリケーション SHALL 設定されている全景品の一覧を表示する
2. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品の画像を表示する
3. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品の名称を表示する
4. IF 景品に説明テキストが設定されている THEN ガチャアプリケーション SHALL その説明を表示する
5. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 視覚的に整理されたレイアウトで景品を配置する
6. IF 設定されている景品が0個である THEN ガチャアプリケーション SHALL 「景品が設定されていません」というメッセージを表示する

### Requirement 2: 景品確率表示機能

**Objective:** 来場者として、各景品の当選確率を知りたい。これにより、透明性のあるガチャ体験を提供し、ユーザの信頼を得る。

#### Acceptance Criteria

1. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品の当選確率をパーセンテージで表示する
2. WHEN 各景品の確率が表示される THEN ガチャアプリケーション SHALL 確率の計算根拠となる在庫数を基に算出する
3. IF 景品の在庫数が変動する THEN ガチャアプリケーション SHALL リアルタイムに確率を再計算して表示する
4. WHEN 確率が表示される THEN ガチャアプリケーション SHALL 小数点以下2桁まで表示する
5. IF すべての景品の確率の合計が100%にならない THEN ガチャアプリケーション SHALL エラー状態を表示する

### Requirement 3: 在庫状況表示機能

**Objective:** 来場者および運営者として、各景品の現在の在庫状況を確認したい。これにより、来場者は残り在庫を把握でき、運営者は在庫管理を効率的に行える。

#### Acceptance Criteria

1. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品の現在在庫数を表示する
2. WHEN 在庫数が表示される THEN ガチャアプリケーション SHALL 「残り○個」という形式で表示する
3. IF 景品の在庫が0個である THEN ガチャアプリケーション SHALL その景品を視覚的に区別して表示する（例：グレーアウト）
4. IF 景品の在庫が5個以下である THEN ガチャアプリケーション SHALL 「残りわずか」という警告表示を追加する
5. WHEN ガチャが実行されて在庫が減少する THEN ガチャアプリケーション SHALL 在庫表示を自動的に更新する
6. WHERE 設定画面にいる THE ガチャアプリケーション SHALL 運営者に対して各景品の在庫状況を一覧表示する

### Requirement 4: 景品レアリティ表示機能

**Objective:** 来場者として、景品のレアリティ（希少度）を視覚的に理解したい。これにより、どの景品が貴重かを直感的に把握でき、ガチャの魅力が向上する。

#### Acceptance Criteria

1. WHEN 景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品のレアリティを視覚的に区別して表示する
2. IF 景品の確率が10%未満である THEN ガチャアプリケーション SHALL その景品を「レア」として表示する
3. IF 景品の確率が3%未満である THEN ガチャアプリケーション SHALL その景品を「超レア」として表示する
4. WHEN レアリティが表示される THEN ガチャアプリケーション SHALL 色分けまたはアイコンを使用して区別する
5. WHEN レアリティが表示される THEN ガチャアプリケーション SHALL レアリティに応じた背景エフェクトを適用する（例：金色の枠、キラキラエフェクト）

### Requirement 5: 景品詳細情報表示機能

**Objective:** 来場者として、景品の詳細情報を確認したい。これにより、各景品について十分な情報を得た上でガチャを引くかどうか判断できる。

#### Acceptance Criteria

1. WHEN 来場者が景品をタップする THEN ガチャアプリケーション SHALL その景品の詳細情報をモーダルまたは拡大表示で表示する
2. WHEN 景品詳細が表示される THEN ガチャアプリケーション SHALL 景品の拡大画像を表示する
3. WHEN 景品詳細が表示される THEN ガチャアプリケーション SHALL 景品名、説明、確率、在庫数を表示する
4. IF 景品に追加属性（例：カテゴリ、タグ）が設定されている THEN ガチャアプリケーション SHALL それらの情報も表示する
5. WHEN 景品詳細が表示されている THEN ガチャアプリケーション SHALL 閉じるボタンまたは戻る操作で一覧画面に戻る

### Requirement 6: 運営者向け景品設定確認機能

**Objective:** 運営者として、設定画面で景品の設定状態を網羅的に確認したい。これにより、設定ミスや不整合を早期に発見でき、イベントをスムーズに運営できる。

#### Acceptance Criteria

1. WHERE 設定画面にいる THE ガチャアプリケーション SHALL 全景品の一覧を表形式またはカード形式で表示する
2. WHEN 設定画面で景品一覧が表示される THEN ガチャアプリケーション SHALL 各景品の名称、画像サムネイル、在庫数、確率を表示する
3. IF 景品に画像が設定されていない THEN ガチャアプリケーション SHALL プレースホルダー画像を表示する
4. IF 景品の在庫が0個である THEN ガチャアプリケーション SHALL その景品に警告アイコンを表示する
5. WHEN 設定画面で景品を選択する THEN ガチャアプリケーション SHALL その景品の詳細編集フォームを表示する
6. IF すべての景品の確率の合計が100%でない THEN ガチャアプリケーション SHALL 警告メッセージを表示する

### Requirement 7: 景品表示のソート・フィルタ機能

**Objective:** 来場者および運営者として、景品をソートまたはフィルタリングして表示したい。これにより、特定の景品を素早く見つけたり、希望する順序で景品を確認できる。

#### Acceptance Criteria

1. WHERE 景品一覧画面にいる THE ガチャアプリケーション SHALL ソートオプションを提供する（確率順、名前順、在庫数順）
2. WHEN 来場者がソートオプションを選択する THEN ガチャアプリケーション SHALL 選択された基準で景品を並び替える
3. WHERE 景品一覧画面にいる THE ガチャアプリケーション SHALL フィルタオプションを提供する（在庫あり/なし、レアリティ別）
4. WHEN 来場者がフィルタを適用する THEN ガチャアプリケーション SHALL 条件に合致する景品のみを表示する
5. WHEN フィルタが適用されている THEN ガチャアプリケーション SHALL 現在のフィルタ状態を視覚的に示す
6. WHEN 来場者がフィルタをクリアする THEN ガチャアプリケーション SHALL 全景品を再表示する

### Requirement 8: 景品統計情報表示機能

**Objective:** 運営者として、景品全体の統計情報を確認したい。これにより、イベント全体の景品配布状況を把握し、適切な在庫管理を行える。

#### Acceptance Criteria

1. WHERE 設定画面にいる THE ガチャアプリケーション SHALL 景品統計サマリーを表示する
2. WHEN 統計サマリーが表示される THEN ガチャアプリケーション SHALL 登録景品の総数を表示する
3. WHEN 統計サマリーが表示される THEN ガチャアプリケーション SHALL 在庫がある景品の数を表示する
4. WHEN 統計サマリーが表示される THEN ガチャアプリケーション SHALL 在庫切れの景品の数を表示する
5. WHEN 統計サマリーが表示される THEN ガチャアプリケーション SHALL 総在庫数を表示する
6. IF 在庫切れの景品が存在する THEN ガチャアプリケーション SHALL 警告メッセージを表示する
